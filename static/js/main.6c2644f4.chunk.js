(this["webpackJsonpwasabi-chess"]=this["webpackJsonpwasabi-chess"]||[]).push([[0],{31:function(e,t,n){var r=n(50),a=["init","newGame","calculateMove","performMove","setPosition"];e.exports=function(){var e=new Worker(n.p+"be9cbea6a623390f42ff.worker.js",{name:"[hash].worker.js"});return r(e,a),e}},48:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(30),o=n.n(i),c=(n(48),n(6)),s=n.n(c),d=n(9),l=n(40),u=n(5),f=n(4),p=n(31),h=n.n(p),m=-1,b=n(1),v=f.a.div.withConfig({displayName:"AnimatedSpinner__Spinner",componentId:"sc-1odzgi2-0"})(['color:#073642;display:inline-block;position:relative;width:80px;height:80px;margin-top:1rem;margin-right:0.5rem;margin-left:1.5rem;div{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite;}div:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#073642;}div:nth-child(1){transform:rotate(0deg);animation-delay:-1.1s;}div:nth-child(2){transform:rotate(30deg);animation-delay:-1s;}div:nth-child(3){transform:rotate(60deg);animation-delay:-0.9s;}div:nth-child(4){transform:rotate(90deg);animation-delay:-0.8s;}div:nth-child(5){transform:rotate(120deg);animation-delay:-0.7s;}div:nth-child(6){transform:rotate(150deg);animation-delay:-0.6s;}div:nth-child(7){transform:rotate(180deg);animation-delay:-0.5s;}div:nth-child(8){transform:rotate(210deg);animation-delay:-0.4s;}div:nth-child(9){transform:rotate(240deg);animation-delay:-0.3s;}div:nth-child(10){transform:rotate(270deg);animation-delay:-0.2s;}div:nth-child(11){transform:rotate(300deg);animation-delay:-0.1s;}div:nth-child(12){transform:rotate(330deg);animation-delay:0s;}@keyframes lds-spinner{0%{opacity:1;}100%{opacity:0;}}']),j=function(){return Object(b.jsxs)(v,{children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})},g=n(35),w=n(36),x=function(){function e(t,n,r){Object(g.a)(this,e),this.start=n,this.end=r,this.encodedMove=Math.abs(t)|n<<3|r<<10}return Object(w.a)(e,null,[{key:"fromEncodedMove",value:function(t){return new e(7&t,t>>3&127,t>>10&127)}}]),e}(),O=n(63),k=f.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"sc-43cd1f-0"})(["position:relative;background-color:",";&.mark:before{position:absolute;content:'';display:block;border-radius:50%;}@media (min-aspect-ratio:99/100){width:12.5vh;height:12.5vh;&.mark:before{top:0.7vh;left:0.7vh;bottom:0.7vh;right:0.7vh;}&.move:before{border:0.6vh solid ",";box-shadow:0 0 0.2vh ",";}&.check:before{top:6vh;left:6vh;bottom:6vh;right:6vh;background-color:",";box-shadow:0 0 2.8vh 4vh ",";}}@media (max-aspect-ratio:100/99){width:12.5vw;height:12.5vw;&.mark:before{top:0.7vw;left:0.7vw;bottom:0.7vw;right:0.7vw;}&.move:before{border:0.6vw solid ",";box-shadow:0 0 0.2vw ",";}&.check:before{top:6vw;left:6vw;bottom:6vw;right:6vw;background-color:",";box-shadow:0 0 2.8vw 4vw ",";}}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor})),y=function(e){var t=e.boardIndex,n=e.children,r=e.movePiece,a=e.isEven,i=e.isStart,o=e.isEnd,c=e.isPossibleTarget,s=e.isInCheck,d=Object(O.a)({accept:"PIECE",drop:function(e,n){r(e.pieceId,e.boardIndex,t)}}),l=Object(u.a)(d,2)[1],f=i||o||c?" mark move":s?"mark check":"",p=c?"rgba(169, 189, 0, 0.69)":i?"#dc322f9f":o?"#dc322faf":s?"#ff322f":"white";return Object(b.jsx)(k,{ref:l,isEven:a,markColor:p,className:f,children:n})},C=n(41),P=n(42),_=n(64),I=n.p+"static/media/white_pawn.c4ef93e3.svg",M=n.p+"static/media/black_pawn.9c59cd4f.svg",S=n.p+"static/media/white_knight.9f8b18bf.svg",E=n.p+"static/media/black_knight.573c3437.svg",D=n.p+"static/media/white_bishop.4626475d.svg",N=n.p+"static/media/black_bishop.e4615717.svg",G=n.p+"static/media/white_rook.57701792.svg",R=n.p+"static/media/black_rook.5936bd72.svg",B=n.p+"static/media/white_queen.d251ffa6.svg",A=n.p+"static/media/black_queen.e698743b.svg",T=n.p+"static/media/white_king.dca19a6e.svg",z=n.p+"static/media/black_king.c0f705b7.svg",F=[I,S,D,G,B,T],L=[M,E,N,R,A,z],q=["Pawn","Knight","Bishop","Rook","Queen","King"],K=f.a.img.withConfig({displayName:"Piece__Image",componentId:"sc-5fuekr-0"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}-webkit-transform:rotateZ(0deg);"]),Q="undefined"!==typeof InstallTrigger,U=function(e){var t=e.color,n=e.pieceId,r=Object(P.a)(e,["color","pieceId"]),a=t===m?L[n-1]:F[n-1];return Object(b.jsx)(K,Object(C.a)({src:a,alt:q[n-1]},r))},J=function(e){var t=e.boardIndex,n=e.color,r=e.piece,a=e.onPickup,i=e.onDrop,o=Math.abs(r),c=n===m?L[o-1]:F[o-1],s=Object(_.a)({item:{type:"PIECE",pieceId:o,boardIndex:t},begin:function(e){return a(t)},end:function(e){return i(t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),d=Object(u.a)(s,2),l=d[0].isDragging,f=d[1],p=Object(b.jsx)(K,{ref:f,src:c,className:l?"dragging":""});return Q?Object(b.jsx)("div",{ref:f,children:p}):p},V=f.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"r10xh7-0"})(["display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);@media (min-aspect-ratio:99/100){width:100vh;height:100vh;}@media (max-aspect-ratio:100/99){width:100vw;height:100vw;}box-shadow:3px 3px 3px #586e75;"]),W=function(e){var t=e.board,n=e.isRotated,r=e.inCheck,a=e.lastMove,i=e.currentPieceMoves,o=e.handlePlayerMove,c=e.updatePossibleMoves,s=e.clearPossibleMoves;return Object(b.jsx)(V,{isRotated:n,children:t.slice(0,64).map((function(e,d){var l=n?63-d:d,u=t[l];return Object(b.jsx)(y,{boardIndex:l,movePiece:o,isEven:(l+(l>>3))%2===0,isStart:l===a.start,isEnd:l===a.end,isPossibleTarget:i.has(l),isInCheck:6===Math.abs(u)&&Math.sign(u)===r,children:0!==u&&Object(b.jsx)(J,{boardIndex:l,color:u<0?m:1,piece:u,onPickup:c,onDrop:s})},l)}))})},Z=n(7),H=n(11),X=f.a.div.withConfig({displayName:"GameMenu__MenuBar",componentId:"sc-1mfgk5w-0"})(["display:flex;flex-direction:column;margin-top:0.7rem;margin-left:1rem;text-align:center;align-items:center;@media (max-aspect-ratio:100/99){margin-left:auto;margin-right:auto;flex-flow:column-reverse;}"]),Y=f.a.div.withConfig({displayName:"GameMenu__MenuItem",componentId:"sc-1mfgk5w-1"})(["position:relative;display:",";padding-bottom:0.2rem;flex-direction:column;@media (max-aspect-ratio:100/99){flex-direction:row;align-self:center;}"],(function(e){return e.hidden?"none":"flex"})),$=f.a.button.withConfig({displayName:"GameMenu__GameButton",componentId:"sc-1mfgk5w-2"})(["background:white;color:#073642;border:1px solid #073642;border-radius:0.3rem;font-size:1rem;font-weight:bold;padding:0.5rem 0.3rem;width:2.5rem;margin:0.2rem;box-shadow:1px 1px 1px #073642;&[disabled]{display:none;}&:hover{background:#073642;color:white;cursor:pointer;}"]),ee=Object(f.a)(Y).withConfig({displayName:"GameMenu__GameResult",componentId:"sc-1mfgk5w-3"})(["margin-top:0.3rem;font-weight:bold;font-size:1.5rem;color:#073642;width:100%;align-items:center;svg{margin-left:1rem;margin-right:1rem;}"]),te=f.a.input.withConfig({displayName:"GameMenu__IconRadioInput",componentId:"sc-1mfgk5w-4"})(["display:none;&:checked + label{opacity:1;}"]),ne=f.a.label.withConfig({displayName:"GameMenu__IconRadioLabel",componentId:"sc-1mfgk5w-5"})(["color:#073642;margin:0.06rem 0.2rem;opacity:0.2;&:hover{opacity:0.5;cursor:pointer;}"]),re=function(e,t){return e?e===t?Z.i:Z.l:Z.a},ae=function(e){var t=e.currentValue,n=e.name,r=e.options,i=e.onChange;return Object(b.jsx)(b.Fragment,{children:r.map((function(e){var r=e.value,o=e.description,c=e.icon;return Object(b.jsxs)(a.a.Fragment,{children:[Object(b.jsx)(te,{type:"radio",id:"".concat(n,"-").concat(r),name:n,value:r,defaultChecked:t===r,onChange:function(e){return i(e.target.value)}}),Object(b.jsx)(ne,{htmlFor:"".concat(n,"-").concat(r),children:Object(b.jsx)(H.a,{icon:c,title:o,size:"2x"})})]},"".concat(n,"-").concat(r))}))})},ie=function(e){var t,n=e.isAiThinking,r=e.firstMovePlayed,a=e.humanPlayerColor,i=e.gameEnded,o=e.winningPlayerColor,c=e.startNewGame,s=e.switchSides,d=e.rotateBoard,l=e.difficultyLevel,u=e.setDifficultyLevel,f=e.canUndoMove,p=e.undoMove;return Object(b.jsxs)(X,{children:[i&&Object(b.jsxs)(ee,{children:[Object(b.jsx)(H.a,{icon:re(o,a),size:"2x"}),o?(t=o,(1===t?"White":"Black")+" wins!"):"Draw!"]}),Object(b.jsxs)(Y,{hidden:n,children:[Object(b.jsx)($,{disabled:!r,onClick:c,children:Object(b.jsx)(H.a,{icon:Z.j,title:"Start new game"})}),Object(b.jsx)($,{disabled:i||r,onClick:s,children:Object(b.jsx)(H.a,{icon:Z.h,title:"Switch sides"})}),Object(b.jsx)($,{disabled:!f||i,onClick:p,children:Object(b.jsx)(H.a,{icon:Z.m,title:"Undo move"})}),Object(b.jsx)($,{disabled:i||!r,onClick:d,children:Object(b.jsx)(H.a,{icon:Z.k,title:"Rotate board"})})]}),Object(b.jsx)(Y,{hidden:n||i,children:Object(b.jsx)(ae,{currentValue:l,name:"difficulty-level",onChange:u,options:[{value:1,description:"Difficulty level 1 (easy)",icon:Z.d},{value:2,description:"Difficulty level 2",icon:Z.g},{value:3,description:"Difficulty level 3",icon:Z.f},{value:4,description:"Difficulty level 4",icon:Z.c},{value:5,description:"Difficulty level 5",icon:Z.b},{value:6,description:"Difficulty level 6 (hard)",icon:Z.e}]})}),n&&Object(b.jsx)(j,{})]})},oe=f.a.div.withConfig({displayName:"PromotionPieceSelection__Overlay",componentId:"sc-1l2nlf7-0"})(["outline:1px solid #586e75;box-shadow:3px 3px 3px #586e75;margin:0;padding:0;position:absolute;z-index:1;@media (min-aspect-ratio:99/100){top:","vh;left:","vh;width:12.5vh;height:50vh;}@media (max-aspect-ratio:100/99){top:","vw;left:","vw;width:12.5vw;height:50vw;}"],(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column})),ce=f.a.div.withConfig({displayName:"PromotionPieceSelection__FieldDiv",componentId:"sc-1l2nlf7-1"})(["position:absolute;background-color:",";@media (min-aspect-ratio:99/100){top:","vh;width:12.5vh;height:12.5vh;}@media (max-aspect-ratio:100/99){top:","vw;width:12.5vw;height:12.5vw;}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.row})),se=function(e){var t=e.column,n=e.playerColor,r=e.onSelection,a=e.isRotated,i=a?7-t:t,o=1===n?a?4:0:a?0:4,c=a&&n!==m||!a&&n===m?[2,3,4,5]:[5,4,3,2];return Object(b.jsx)(oe,{row:o,column:i,children:c.map((function(e,t){return Object(b.jsx)(ce,{row:t,isEven:i+t&1,onClick:function(){return r(e)},children:Object(b.jsx)(U,{color:n,pieceId:e})},t)}))})},de=h()(),le=f.a.div.withConfig({displayName:"Game__GameArea",componentId:"sc-19jauhs-0"})(["display:flex;flex-wrap:wrap;"]),ue="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",fe=f.a.div.withConfig({displayName:"Game__Centered",componentId:"sc-19jauhs-1"})(["position:absolute;left:calc(50% - 60px);top:calc(50% - 60px);"]),pe=function(){var e=Object(r.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(1),o=Object(u.a)(i,2),c=o[0],f=o[1],p=Object(r.useState)(1),h=Object(u.a)(p,2),v=h[0],g=h[1],w=Object(r.useState)(!1),O=Object(u.a)(w,2),k=O[0],y=O[1],C=Object(r.useState)(),P=Object(u.a)(C,2),_=P[0],I=P[1],M=Object(r.useState)(!1),S=Object(u.a)(M,2),E=S[0],D=S[1],N=Object(r.useState)([]),G=Object(u.a)(N,2),R=G[0],B=G[1],A=Object(r.useState)(new Set),T=Object(u.a)(A,2),z=T[0],F=T[1],L=Object(r.useState)(),q=Object(u.a)(L,2),K=q[0],Q=q[1],U=Object(r.useState)(6),J=Object(u.a)(U,2),V=J[0],Z=J[1],H=Object(r.useState)([]),X=Object(u.a)(H,2),Y=X[0],$=X[1],ee=Object(r.useState)(void 0),te=Object(u.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)(0),oe=Object(u.a)(ae,2),ce=oe[0],pe=oe[1],he=Y.length>0?Y[Y.length-1]:{start:-1,end:-1},me=function(){return B([])},be=Object(r.useCallback)((function(e){$([].concat(Object(l.a)(Y),[e]))}),[$,Y]),ve=Object(r.useCallback)(function(){var e=Object(d.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(t.board),B(t.moves),t.whiteInCheck?pe(1):t.blackInCheck?pe(m):pe(0),t.gameEnded?(D(!0),t.checkMate&&Q(-t.activePlayer)):f(t.activePlayer);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.init();case 2:return e.next=4,de.newGame();case 4:return e.next=6,de.setPosition(ue,[]);case 6:return t=e.sent,e.next=9,ve(t);case 9:case"end":return e.stop()}}),e)})))()}),[ve]);var je=Object(r.useCallback)((function(e,t){return R.some((function(n){return n.start===e&&n.end===t}))}),[R]),ge=function(e){return new Promise((function(t){return setTimeout(t,e)}))},we=Object(r.useCallback)(Object(d.a)(s.a.mark((function e(){var t,n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(),y(!0),e.next=4,Promise.all([de.calculateMove(V),ge(150)]);case 4:return t=e.sent,n=Object(u.a)(t,1),r=n[0],e.next=9,de.performMove(r);case 9:return a=e.sent,y(!1),e.next=13,ve(a);case 13:be(r);case 14:case"end":return e.stop()}}),e)}))),[V,be,ve]),xe=function(){var e=Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(!0),g(-v),y(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){k&&Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:case"end":return e.stop()}}),e)})))()}),[k,we]);var Oe=function(){var e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!1),Q(void 0),f(1),g(1),$([]),F(new Set),e.next=8,de.newGame();case 8:return e.next=10,de.setPosition(ue,[]);case 10:return t=e.sent,e.next=13,ve(t);case 13:a(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=Object(r.useCallback)(Object(d.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Y.slice(0,Y.length-2),e.next=3,de.setPosition(ue,t);case 3:return n=e.sent,$(t),e.next=7,ve(n);case 7:case"end":return e.stop()}}),e)}))),[Y,$,ve]),ye=Object(r.useCallback)(function(){var e=Object(d.a)(s.a.mark((function e(t,n,r){var a,i,o,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Math.abs(t),!E&&!k){e.next=3;break}return e.abrupt("return");case 3:if(je(n,r)){e.next=5;break}return e.abrupt("return");case 5:if(F(new Set),1!==a||!(1===c&&r<8||c===m&&r>=56)){e.next=11;break}me(),re({start:n,end:r,column:7&r,color:c}),e.next=22;break;case 11:return(i=_.slice())[n]=0,I(i),o=new x(a,n,r),e.next=17,de.performMove(o);case 17:return d=e.sent,e.next=20,ve(d);case 20:be(o),d.gameEnded||y(!0);case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[c,be,_,je,E,k,ve]),Ce=Object(r.useCallback)(function(){var e=Object(d.a)(s.a.mark((function e(t){var n,r,a,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne.start,r=ne.end,re(void 0),(a=_.slice())[n]=0,I(a),i=new x(t,n,r),e.next=8,de.performMove(i);case 8:return o=e.sent,e.next=11,ve(o);case 11:be(i),o.gameEnded||y(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[be,_,ne,re,ve]);return _?Object(b.jsxs)(le,{children:[ne&&Object(b.jsx)(se,{column:ne.column,playerColor:ne.color,isRotated:n,onSelection:Ce}),Object(b.jsx)(W,{board:_,isRotated:n,lastMove:he,currentPieceMoves:z,handlePlayerMove:ye,updatePossibleMoves:function(e){var t=R.filter((function(t){return t.start===e})).map((function(e){return e.end}));F(new Set(t))},clearPossibleMoves:function(){F(new Set)},inCheck:ce}),Object(b.jsx)(ie,{isAiThinking:k,firstMovePlayed:-1!==he.start,humanPlayerColor:v,gameEnded:E,winningPlayerColor:K,startNewGame:Oe,switchSides:xe,rotateBoard:function(){return a(!n)},difficultyLevel:V,setDifficultyLevel:Z,canUndoMove:!E&&Y.length>1,undoMove:ke})]}):Object(b.jsx)(fe,{children:Object(b.jsx)(j,{})})},he=n(62),me=n(38),be=n(39),ve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t.map((function(t){return t(e)}));return{setup:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.forEach((function(e){return e.setup.apply(e,t)}))},teardown:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.forEach((function(e){return e.teardown.apply(e,t)}))},connectDropTarget:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.forEach((function(e){return e.connectDropTarget.apply(e,t)}))},connectDragPreview:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.forEach((function(e){return e.connectDragPreview.apply(e,t)}))},connectDragSource:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.forEach((function(e){return e.connectDragSource.apply(e,t)}))}}}};var je=function(){return Object(b.jsx)("main",{children:Object(b.jsx)(he.a,{backend:ve(me.a,be.a),children:Object(b.jsx)(pe,{})})})};o.a.render(Object(b.jsx)(je,{}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.6c2644f4.chunk.js.map