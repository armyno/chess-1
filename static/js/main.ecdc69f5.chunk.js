(this["webpackJsonpwasabi-chess"]=this["webpackJsonpwasabi-chess"]||[]).push([[0],{30:function(e,t,n){var a=n(61),r=["init","newGame","calculateMove","performMove","setPosition"];e.exports=function(){var e=new Worker(n.p+"ce470e655177d32550ff.worker.js",{name:"[hash].worker.js"});return a(e,r),e}},37:function(e,t,n){e.exports=n.p+"static/media/white_pawn.41da1b5b.svg"},38:function(e,t,n){e.exports=n.p+"static/media/black_pawn.3cab4671.svg"},39:function(e,t,n){e.exports=n.p+"static/media/white_knight.35294341.svg"},40:function(e,t,n){e.exports=n.p+"static/media/black_knight.f3636380.svg"},41:function(e,t,n){e.exports=n.p+"static/media/white_bishop.36a96cf8.svg"},42:function(e,t,n){e.exports=n.p+"static/media/black_bishop.341337f4.svg"},43:function(e,t,n){e.exports=n.p+"static/media/white_rook.007b43f5.svg"},44:function(e,t,n){e.exports=n.p+"static/media/black_rook.e7f61dec.svg"},45:function(e,t,n){e.exports=n.p+"static/media/white_queen.51d538db.svg"},46:function(e,t,n){e.exports=n.p+"static/media/black_queen.87612c77.svg"},47:function(e,t,n){e.exports=n.p+"static/media/white_king.9e716b1e.svg"},48:function(e,t,n){e.exports=n.p+"static/media/black_king.12ae1430.svg"},54:function(e,t,n){e.exports=n(68)},59:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(29),o=n.n(i),c=(n(59),n(5)),l=n.n(c),s=n(8),u=n(51),d=n(4),m=n(3),f=n(30),p=n.n(f),v=m.a.div.withConfig({displayName:"AnimatedSpinner",componentId:"sc-1odzgi2-0"})(['color:#073642;display:inline-block;position:relative;width:80px;height:80px;margin-top:1rem;margin-right:0.5rem;margin-left:1.5rem;div{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite;}div:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#073642;}div:nth-child(1){transform:rotate(0deg);animation-delay:-1.1s;}div:nth-child(2){transform:rotate(30deg);animation-delay:-1s;}div:nth-child(3){transform:rotate(60deg);animation-delay:-0.9s;}div:nth-child(4){transform:rotate(90deg);animation-delay:-0.8s;}div:nth-child(5){transform:rotate(120deg);animation-delay:-0.7s;}div:nth-child(6){transform:rotate(150deg);animation-delay:-0.6s;}div:nth-child(7){transform:rotate(180deg);animation-delay:-0.5s;}div:nth-child(8){transform:rotate(210deg);animation-delay:-0.4s;}div:nth-child(9){transform:rotate(240deg);animation-delay:-0.3s;}div:nth-child(10){transform:rotate(270deg);animation-delay:-0.2s;}div:nth-child(11){transform:rotate(300deg);animation-delay:-0.1s;}div:nth-child(12){transform:rotate(330deg);animation-delay:0s;}@keyframes lds-spinner{0%{opacity:1;}100%{opacity:0;}}']),h=function(){return r.a.createElement(v,null,r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},b=n(34),g=n(35),w=function(){function e(t,n,a){Object(b.a)(this,e),this.start=n,this.end=a,this.encodedMove=Math.abs(t)|n<<3|a<<10}return Object(g.a)(e,null,[{key:"fromEncodedMove",value:function(t){return new e(7&t,t>>3&127,t>>10&127)}}]),e}(),k=n(71),x=m.a.div.withConfig({displayName:"Field__FieldDiv",componentId:"sc-43cd1f-0"})(["position:relative;background-color:",";&.mark:before{position:absolute;content:'';display:block;border-radius:50%;}@media (min-aspect-ratio:99/100){width:12.5vh;height:12.5vh;&.mark:before{top:0.7vh;left:0.7vh;bottom:0.7vh;right:0.7vh;}&.move:before{border:0.6vh solid ",";box-shadow:0 0 0.2vh ",";}&.check:before{top:6vh;left:6vh;bottom:6vh;right:6vh;background-color:",";box-shadow:0 0 2.8vh 4vh ",";}}@media (max-aspect-ratio:100/99){width:12.5vw;height:12.5vw;&.mark:before{top:0.7vw;left:0.7vw;bottom:0.7vw;right:0.7vw;}&.move:before{border:0.6vw solid ",";box-shadow:0 0 0.2vw ",";}&.check:before{top:6vw;left:6vw;bottom:6vw;right:6vw;background-color:",";box-shadow:0 0 2.8vw 4vw ",";}}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor}),(function(e){return e.markColor})),y=function(e){var t=e.boardIndex,n=e.children,a=e.movePiece,i=e.isEven,o=e.isStart,c=e.isEnd,l=e.isPossibleTarget,s=e.isInCheck,u=Object(k.a)({accept:"PIECE",drop:function(e,n){a(e.pieceId,e.boardIndex,t)}}),m=Object(d.a)(u,2)[1],f=o||c||l?" mark move":s?"mark check":"",p=l?"rgba(169, 189, 0, 0.69)":o?"#dc322f9f":c?"#dc322faf":s?"#ff322f":"white";return r.a.createElement(x,{ref:m,isEven:i,markColor:p,className:f},n)},E=n(52),j=n(72),O=n(37),C=n.n(O),P=n(38),I=n.n(P),M=n(39),_=n.n(M),S=n(40),D=n.n(S),N=n(41),G=n.n(N),R=n(42),B=n.n(R),A=n(43),T=n.n(A),z=n(44),F=n.n(z),L=n(45),q=n.n(L),K=n(46),Q=n.n(K),U=n(47),J=n.n(U),V=n(48),W=n.n(V),Z=[C.a,_.a,G.a,T.a,q.a,J.a],H=[I.a,D.a,B.a,F.a,Q.a,W.a],X=["Pawn","Knight","Bishop","Rook","Queen","King"],Y=m.a.img.withConfig({displayName:"Piece__Image",componentId:"sc-5fuekr-0"})(["display:block;margin:13%;height:74%;width:74%;&.dragging{visibility:hidden;}-webkit-transform:rotateZ(0deg);"]),$="undefined"!==typeof InstallTrigger,ee=function(e){var t=e.color,n=e.pieceId,a=Object(E.a)(e,["color","pieceId"]),i=-1===t?H[n-1]:Z[n-1];return r.a.createElement(Y,Object.assign({src:i,alt:X[n-1]},a))},te=function(e){var t=e.boardIndex,n=e.color,a=e.piece,i=e.onPickup,o=e.onDrop,c=Math.abs(a),l=-1===n?H[c-1]:Z[c-1],s=Object(j.a)({item:{type:"PIECE",pieceId:c,boardIndex:t},begin:function(e){return i(t)},end:function(e){return o(t)},collect:function(e){return{isDragging:!!e.isDragging()}}}),u=Object(d.a)(s,2),m=u[0].isDragging,f=u[1],p=r.a.createElement(Y,{ref:f,src:l,className:m?"dragging":""});return $?r.a.createElement("div",{ref:f},p):p},ne=m.a.div.withConfig({displayName:"Board__BoardGrid",componentId:"r10xh7-0"})(["display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,1fr);@media (min-aspect-ratio:99/100){width:100vh;height:100vh;}@media (max-aspect-ratio:100/99){width:100vw;height:100vw;}box-shadow:3px 3px 3px #586e75;"]),ae=function(e){var t=e.board,n=e.isRotated,a=e.inCheck,i=e.lastMove,o=e.currentPieceMoves,c=e.handlePlayerMove,l=e.updatePossibleMoves,s=e.clearPossibleMoves;return r.a.createElement(ne,{isRotated:n},t.slice(0,64).map((function(e,u){var d=n?63-u:u,m=t[d];return r.a.createElement(y,{key:d,boardIndex:d,movePiece:c,isEven:(d+(d>>3))%2===0,isStart:d===i.start,isEnd:d===i.end,isPossibleTarget:o.has(d),isInCheck:6===Math.abs(m)&&Math.sign(m)===a},0!==m&&r.a.createElement(te,{boardIndex:d,color:m<0?-1:1,piece:m,onPickup:l,onDrop:s}))})))},re=n(6),ie=n(10),oe=m.a.div.withConfig({displayName:"GameMenu__MenuBar",componentId:"sc-1mfgk5w-0"})(["display:flex;flex-direction:column;margin-top:0.7rem;margin-left:1rem;text-align:center;align-items:center;@media (max-aspect-ratio:100/99){margin-left:auto;margin-right:auto;flex-flow:column-reverse;}"]),ce=m.a.div.withConfig({displayName:"GameMenu__MenuItem",componentId:"sc-1mfgk5w-1"})(["position:relative;display:",";padding-bottom:0.2rem;flex-direction:column;@media (max-aspect-ratio:100/99){flex-direction:row;align-self:center;}"],(function(e){return e.hidden?"none":"flex"})),le=m.a.button.withConfig({displayName:"GameMenu__GameButton",componentId:"sc-1mfgk5w-2"})(["background:white;color:#073642;border:1px solid #073642;border-radius:0.3rem;font-size:1rem;font-weight:bold;padding:0.5rem 0.3rem;width:2.5rem;margin:0.2rem;box-shadow:1px 1px 1px #073642;&[disabled]{display:none;}&:hover{background:#073642;color:white;cursor:pointer;}"]),se=Object(m.a)(ce).withConfig({displayName:"GameMenu__GameResult",componentId:"sc-1mfgk5w-3"})(["margin-top:0.3rem;font-weight:bold;font-size:1.5rem;color:#073642;width:100%;align-items:center;svg{margin-left:1rem;margin-right:1rem;}"]),ue=m.a.input.withConfig({displayName:"GameMenu__IconRadioInput",componentId:"sc-1mfgk5w-4"})(["display:none;&:checked + label{opacity:1;}"]),de=m.a.label.withConfig({displayName:"GameMenu__IconRadioLabel",componentId:"sc-1mfgk5w-5"})(["color:#073642;margin:0.06rem 0.2rem;opacity:0.2;&:hover{opacity:0.5;cursor:pointer;}"]),me=function(e,t){return e?e===t?re.i:re.l:re.a},fe=function(e){var t=e.currentValue,n=e.name,a=e.options,i=e.onChange;return r.a.createElement(r.a.Fragment,null,a.map((function(e){var a=e.value,o=e.description,c=e.icon;return r.a.createElement(r.a.Fragment,{key:"".concat(n,"-").concat(a)},r.a.createElement(ue,{type:"radio",id:"".concat(n,"-").concat(a),name:n,value:a,defaultChecked:t===a,onChange:function(e){return i(e.target.value)}}),r.a.createElement(de,{htmlFor:"".concat(n,"-").concat(a)},r.a.createElement(ie.a,{icon:c,title:o,size:"2x"})))})))},pe=function(e){var t=e.isAiThinking,n=e.firstMovePlayed,a=e.humanPlayerColor,i=e.gameEnded,o=e.winningPlayerColor,c=e.startNewGame,l=e.switchSides,s=e.rotateBoard,u=e.difficultyLevel,d=e.setDifficultyLevel,m=e.canUndoMove,f=e.undoMove;return r.a.createElement(oe,null,i&&r.a.createElement(se,null,r.a.createElement(ie.a,{icon:me(o,a),size:"2x"}),o?(1===o?"White":"Black")+" wins!":"Draw!"),r.a.createElement(ce,{hidden:t},r.a.createElement(le,{disabled:!n,onClick:c},r.a.createElement(ie.a,{icon:re.j,title:"Start new game"})),r.a.createElement(le,{disabled:i||n,onClick:l},r.a.createElement(ie.a,{icon:re.h,title:"Switch sides"})),r.a.createElement(le,{disabled:!m||i,onClick:f},r.a.createElement(ie.a,{icon:re.m,title:"Undo move"})),r.a.createElement(le,{disabled:i||!n,onClick:s},r.a.createElement(ie.a,{icon:re.k,title:"Rotate board"}))),r.a.createElement(ce,{hidden:t||i},r.a.createElement(fe,{currentValue:u,name:"difficulty-level",onChange:d,options:[{value:1,description:"Difficulty level 1 (easy)",icon:re.d},{value:2,description:"Difficulty level 2",icon:re.g},{value:3,description:"Difficulty level 3",icon:re.f},{value:4,description:"Difficulty level 4",icon:re.c},{value:5,description:"Difficulty level 5",icon:re.b},{value:6,description:"Difficulty level 6 (hard)",icon:re.e}]})),t&&r.a.createElement(h,null))},ve=m.a.div.withConfig({displayName:"PromotionPieceSelection__Overlay",componentId:"sc-1l2nlf7-0"})(["outline:1px solid #586e75;box-shadow:3px 3px 3px #586e75;margin:0;padding:0;position:absolute;z-index:1;@media (min-aspect-ratio:99/100){top:","vh;left:","vh;width:12.5vh;height:50vh;}@media (max-aspect-ratio:100/99){top:","vw;left:","vw;width:12.5vw;height:50vw;}"],(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.column})),he=m.a.div.withConfig({displayName:"PromotionPieceSelection__FieldDiv",componentId:"sc-1l2nlf7-1"})(["position:absolute;background-color:",";@media (min-aspect-ratio:99/100){top:","vh;width:12.5vh;height:12.5vh;}@media (max-aspect-ratio:100/99){top:","vw;width:12.5vw;height:12.5vw;}"],(function(e){return e.isEven?"#fdf6e3":"#eee8d5"}),(function(e){return 12.5*e.row}),(function(e){return 12.5*e.row})),be=function(e){var t=e.column,n=e.playerColor,a=e.onSelection,i=e.isRotated,o=i?7-t:t,c=1===n?i?4:0:i?0:4,l=i&&-1!==n||!i&&-1===n?[2,3,4,5]:[5,4,3,2];return r.a.createElement(ve,{row:c,column:o},l.map((function(e,t){return r.a.createElement(he,{key:t,row:t,isEven:o+t&1,onClick:function(){return a(e)}},r.a.createElement(ee,{color:n,pieceId:e}))})))},ge=p()(),we=m.a.div.withConfig({displayName:"Game__GameArea",componentId:"sc-19jauhs-0"})(["display:flex;flex-wrap:wrap;"]),ke="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",xe=m.a.div.withConfig({displayName:"Game__Centered",componentId:"sc-19jauhs-1"})(["position:absolute;left:calc(50% - 60px);top:calc(50% - 60px);"]),ye=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(1),c=Object(d.a)(o,2),m=c[0],f=c[1],p=Object(a.useState)(1),v=Object(d.a)(p,2),b=v[0],g=v[1],k=Object(a.useState)(!1),x=Object(d.a)(k,2),y=x[0],E=x[1],j=Object(a.useState)(),O=Object(d.a)(j,2),C=O[0],P=O[1],I=Object(a.useState)(!1),M=Object(d.a)(I,2),_=M[0],S=M[1],D=Object(a.useState)([]),N=Object(d.a)(D,2),G=N[0],R=N[1],B=Object(a.useState)(new Set),A=Object(d.a)(B,2),T=A[0],z=A[1],F=Object(a.useState)(),L=Object(d.a)(F,2),q=L[0],K=L[1],Q=Object(a.useState)(6),U=Object(d.a)(Q,2),J=U[0],V=U[1],W=Object(a.useState)([]),Z=Object(d.a)(W,2),H=Z[0],X=Z[1],Y=Object(a.useState)(void 0),$=Object(d.a)(Y,2),ee=$[0],te=$[1],ne=Object(a.useState)(0),re=Object(d.a)(ne,2),ie=re[0],oe=re[1],ce=H.length>0?H[H.length-1]:{start:-1,end:-1},le=function(){return R([])},se=Object(a.useCallback)((function(e){X([].concat(Object(u.a)(H),[e]))}),[X,H]),ue=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t.board),R(t.moves),t.whiteInCheck?oe(1):t.blackInCheck?oe(-1):oe(0),t.gameEnded?(S(!0),t.checkMate&&K(-t.activePlayer)):f(t.activePlayer);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.init();case 2:return e.next=4,ge.newGame();case 4:return e.next=6,ge.setPosition(ke,[]);case 6:return t=e.sent,e.next=9,ue(t);case 9:case"end":return e.stop()}}),e)})))()}),[ue]);var de=Object(a.useCallback)((function(e,t){return G.some((function(n){return n.start===e&&n.end===t}))}),[G]),me=function(e){return new Promise((function(t){return setTimeout(t,e)}))},fe=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le(),E(!0),e.next=4,Promise.all([ge.calculateMove(J),me(150)]);case 4:return t=e.sent,n=Object(d.a)(t,1),a=n[0],e.next=9,ge.performMove(a);case 9:return r=e.sent,E(!1),e.next=13,ue(r);case 13:se(a);case 14:case"end":return e.stop()}}),e)}))),[J,se,ue]),ve=function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),g(-b),E(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){y&&Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:case"end":return e.stop()}}),e)})))()}),[y,fe]);var he=function(){var e=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),K(void 0),f(1),g(1),X([]),z(new Set),e.next=8,ge.newGame();case 8:return e.next=10,ge.setPosition(ke,[]);case 10:return t=e.sent,e.next=13,ue(t);case 13:i(!1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=Object(a.useCallback)(Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H.slice(0,H.length-2),e.next=3,ge.setPosition(ke,t);case 3:return n=e.sent,X(t),e.next=7,ue(n);case 7:case"end":return e.stop()}}),e)}))),[H,X,ue]),Ee=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t,n,a){var r,i,o,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Math.abs(t),!_&&!y){e.next=3;break}return e.abrupt("return");case 3:if(de(n,a)){e.next=5;break}return e.abrupt("return");case 5:if(z(new Set),1!==r||!(1===m&&a<8||-1===m&&a>=56)){e.next=11;break}le(),te({start:n,end:a,column:7&a,color:m}),e.next=22;break;case 11:return(i=C.slice())[n]=0,P(i),o=new w(r,n,a),e.next=17,ge.performMove(o);case 17:return c=e.sent,e.next=20,ue(c);case 20:se(o),c.gameEnded||E(!0);case 22:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),[m,se,C,de,_,y,ue]),je=Object(a.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t){var n,a,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.start,a=ee.end,te(void 0),(r=C.slice())[n]=0,P(r),i=new w(t,n,a),e.next=8,ge.performMove(i);case 8:return o=e.sent,e.next=11,ue(o);case 11:se(i),o.gameEnded||E(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[se,C,ee,te,ue]);return C?r.a.createElement(we,null,ee&&r.a.createElement(be,{column:ee.column,playerColor:ee.color,isRotated:n,onSelection:je}),r.a.createElement(ae,{board:C,isRotated:n,lastMove:ce,currentPieceMoves:T,handlePlayerMove:Ee,updatePossibleMoves:function(e){var t=G.filter((function(t){return t.start===e})).map((function(e){return e.end}));z(new Set(t))},clearPossibleMoves:function(){z(new Set)},inCheck:ie}),r.a.createElement(pe,{isAiThinking:y,firstMovePlayed:-1!==ce.start,humanPlayerColor:b,gameEnded:_,winningPlayerColor:q,startNewGame:he,switchSides:ve,rotateBoard:function(){return i(!n)},difficultyLevel:J,setDifficultyLevel:V,canUndoMove:!_&&H.length>1,undoMove:ye})):r.a.createElement(xe,null,r.a.createElement(h,null))},Ee=n(70),je=n(49),Oe=n(50),Ce=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=t.map((function(t){return t(e)}));return{setup:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.setup.apply(e,t)}))},teardown:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.teardown.apply(e,t)}))},connectDropTarget:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDropTarget.apply(e,t)}))},connectDragPreview:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragPreview.apply(e,t)}))},connectDragSource:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.forEach((function(e){return e.connectDragSource.apply(e,t)}))}}}};var Pe=function(){return r.a.createElement("main",null,r.a.createElement(Ee.a,{backend:Ce(je.a,Oe.a)},r.a.createElement(ye,null)))};o.a.render(r.a.createElement(Pe,null),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.ecdc69f5.chunk.js.map